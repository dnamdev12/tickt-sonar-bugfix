{"ast":null,"code":"import _defineProperty from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Constants from'../../../utils/constants';import Select from'react-select';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function valuetext(value){return\"\".concat(value,\"\\xB0C\");}// \"Per hour\" and \"Fixed price\"\nvar Payment=function Payment(_ref){var data=_ref.data,stepCompleted=_ref.stepCompleted,handleStepComplete=_ref.handleStepComplete,handleStepBack=_ref.handleStepBack;var errorStrings=Constants.errorStrings;var _useState=useState({pay_type:'Per hour',amount:''}),_useState2=_slicedToArray(_useState,2),paymentDetails=_useState2[0],setPaymentDetails=_useState2[1];var _useState3=useState({pay_type:'',amount:''}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),continueClicked=_useState6[0],setContinueClicked=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),localChanges=_useState8[0],setLocationChanges=_useState8[1];var _useState9=useState({value:\"Per hour\",label:\"Per Hour\"}),_useState10=_slicedToArray(_useState9,2),reactSelect=_useState10[0],setReactSelect=_useState10[1];var _useState11=useState('1'),_useState12=_slicedToArray(_useState11,2),checkType=_useState12[0],setCheckType=_useState12[1];var _useState13=useState('0'),_useState14=_slicedToArray(_useState13,2),canDisable=_useState14[0],setCanDisable=_useState14[1];useEffect(function(){if(stepCompleted&&!localChanges){setPaymentDetails({pay_type:data.pay_type||'Fixed price',amount:data.amount});if(data.quoteJob=='0'){if(data.pay_type==='Per hour'){setReactSelect({value:'Per hour',label:'Per Hour'});}else{setReactSelect({value:'Fixed price',label:'Fixed Price'});}setCheckType('1');}else{setCheckType('2');// setCanDisable('1');\n}setLocationChanges(true);}},[stepCompleted,data]);// for error messages\nvar label={pay_type:'Pay Type',amount:'Price'};var checkDecimal=function checkDecimal(name,value){var split_values=value.split('.');console.log({split_values:split_values});if(split_values.length){var first=split_values[0];var last=split_values[1];if(last&&(last===null||last===void 0?void 0:last.length)>2){return'Price field must have maximum 2 digits after decimal';}if(first&&(first===null||first===void 0?void 0:first.length)>6){return'Price field must have 6 or less digits before decimal';}var value_=+value;if(value_!==0&&value_<10){return'Minimum amount value is 10.';}return'';}else{return'';}};var isInvalid=function isInvalid(name,value){switch(name){case'pay_type':return!value.length?\"\".concat(label[name],\" is required.\"):'';case'amount':return!value.length||+value<1?\"\".concat(label[name],\" is required.\"):checkDecimal(name,value);}};var handleChange=function handleChange(value,name){setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},_defineProperty({},name,isInvalid(name,value)));});setPaymentDetails(function(prevDetails){// if (name === \"pay_type\" && prevDetails.pay_type !== value) {\n//   prevDetails.amount = '';\n// }\nreturn _objectSpread(_objectSpread({},prevDetails),{},_defineProperty({},name,value));});};var handleContinue=function handleContinue(e){e.preventDefault();var hasErrors;if(!continueClicked){setContinueClicked(true);if(checkType=='2'){handleStepComplete({quoteJob:'1'});return;}hasErrors=Object.keys(paymentDetails).reduce(function(prevError,name){var hasError=!!isInvalid(name,paymentDetails[name]);setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},_defineProperty({},name,isInvalid(name,paymentDetails[name])));});return hasError||prevError;},false);}if(!hasErrors){var paymentdt=_objectSpread(_objectSpread({},paymentDetails),{},{quoteJob:'0'});console.log({paymentdt:paymentdt});handleStepComplete(paymentdt);}else{setContinueClicked(false);}};var checkErrors=function checkErrors(){if(checkType=='2'){return false;}var value_1=paymentDetails['pay_type'];var value_2=paymentDetails['amount'];if(value_1&&value_2){var error_1=isInvalid('pay_type',paymentDetails['pay_type']);var error_2=isInvalid('amount',paymentDetails['amount']);if(!(error_1===null||error_1===void 0?void 0:error_1.length)&&!(error_2===null||error_2===void 0?void 0:error_2.length)){return false;}}return true;};var priceOptions=[{value:'Per hour',label:'Per Hour'},{value:'Fixed price',label:'Fixed Price'}];var pay_type=paymentDetails.pay_type,amount=paymentDetails.amount;return/*#__PURE__*/_jsx(\"div\",{className:\"app_wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"section_wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back\",onClick:handleStepBack}),/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:\"Job type\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox_wrap agree_check\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(){// if (canDisable !== '1') {\ncheckType!=='1'?setCheckType('1'):setCheckType('0');// }\n},checked:checkType==='1'?true:false,className:\"filter-type filled-in\",type:\"checkbox\",id:\"milestone1\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"milestone1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ft_bold\",children:'I have a budget'}),/*#__PURE__*/_jsx(\"div\",{className:\"sub-title\",children:\"How would you like to pay for it?\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",style:{paddingLeft:'35px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text_field\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Price\",name:\"Price\",className:\"detect_input_ltr\",min:\"10\"// min=\"1\"\n,step:\".01\",required:true,value:Number(amount)?amount:'',readOnly:checkType==='2'?true:false,onChange:function onChange(_ref2){var value=_ref2.target.value;return handleChange(value,'amount');}}),/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon_ltr dollar\",children:\"$\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"error_msg mtb-15\",children:errors===null||errors===void 0?void 0:errors.amount})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(Select,{className:\"select_menu\",value:reactSelect,options:priceOptions,isDisabled:checkType==='2'?true:false,onChange:function onChange(item){setReactSelect(item);handleChange(item===null||item===void 0?void 0:item.value,'pay_type');}})})})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox_wrap agree_check\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(){if(checkType!=='2'){setCheckType('2');}else{setCheckType('0');}setPaymentDetails({pay_type:'Per hour',amount:''});setErrors({pay_type:'',amount:''});},checked:checkType==='2'?true:false,className:\"filter-type filled-in\",type:\"checkbox\",id:\"milestone2\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"milestone2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ft_bold\",children:'I need a quote'}),/*#__PURE__*/_jsx(\"div\",{className:\"sub-title\",children:\"Find a quote that suits your budget\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{className:\"fill_btn full_btn btn-effect \".concat(checkErrors()?'disable_btn':''),onClick:handleContinue,children:\"Continue\"})})]})})});};export default Payment;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/postJob/components/payment.tsx"],"names":["React","useEffect","useState","Constants","Select","valuetext","value","Payment","data","stepCompleted","handleStepComplete","handleStepBack","errorStrings","pay_type","amount","paymentDetails","setPaymentDetails","errors","setErrors","continueClicked","setContinueClicked","localChanges","setLocationChanges","label","reactSelect","setReactSelect","checkType","setCheckType","canDisable","setCanDisable","quoteJob","checkDecimal","name","split_values","split","console","log","length","first","last","value_","isInvalid","handleChange","prevErrors","prevDetails","handleContinue","e","preventDefault","hasErrors","Object","keys","reduce","prevError","hasError","paymentdt","checkErrors","value_1","value_2","error_1","error_2","priceOptions","paddingLeft","Number","target","item"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport Constants from '../../../utils/constants';\nimport Select from 'react-select';\nimport MenuItem from '@material-ui/core/MenuItem';\n\n\nfunction valuetext(value: number) {\n  return `${value}Â°C`;\n}\n\ninterface Proptypes {\n  data: any;\n  stepCompleted: Boolean;\n  handleStepComplete: (data: any) => void;\n  handleStepBack: () => void;\n}\n// \"Per hour\" and \"Fixed price\"\nconst Payment = ({ data, stepCompleted, handleStepComplete, handleStepBack }: Proptypes) => {\n  const { errorStrings } = Constants;\n\n  const [paymentDetails, setPaymentDetails] = useState<{ [index: string]: string }>({ pay_type: 'Per hour', amount: '' });\n  const [errors, setErrors] = useState({ pay_type: '', amount: '' });\n  const [continueClicked, setContinueClicked] = useState(false);\n  const [localChanges, setLocationChanges] = useState(false);\n  const [reactSelect, setReactSelect] = useState({ value: \"Per hour\", label: \"Per Hour\" });\n\n  const [checkType, setCheckType] = useState('1');\n  const [canDisable, setCanDisable] = useState('0');\n\n  useEffect(() => {\n    if (stepCompleted && !localChanges) {\n      setPaymentDetails({\n        pay_type: data.pay_type || 'Fixed price',\n        amount: data.amount\n      });\n\n      if (data.quoteJob == '0') {\n        if (data.pay_type === 'Per hour') {\n          setReactSelect({ value: 'Per hour', label: 'Per Hour' });\n        } else {\n          setReactSelect({ value: 'Fixed price', label: 'Fixed Price' });\n        }\n        setCheckType('1');\n      } else {\n        setCheckType('2');\n        // setCanDisable('1');\n      }\n\n      setLocationChanges(true);\n    }\n  }, [stepCompleted, data]);\n\n  // for error messages\n  const label: { [index: string]: string } = {\n    pay_type: 'Pay Type',\n    amount: 'Price',\n  }\n\n  const checkDecimal = (name: string, value: string) => {\n    let split_values = value.split('.');\n    console.log({\n      split_values\n    })\n    if (split_values.length) {\n      let first: any = split_values[0];\n      let last: any = split_values[1];\n\n      if (last && last?.length > 2) {\n        return 'Price field must have maximum 2 digits after decimal';\n      }\n\n      if (first && first?.length > 6) {\n        return 'Price field must have 6 or less digits before decimal';\n      }\n\n      let value_: number = +value;\n      if (value_ !== 0 && value_ < 10) {\n        return 'Minimum amount value is 10.'\n      }\n      return ''\n\n    } else {\n      return '';\n    }\n  }\n  const isInvalid = (name: string, value: string) => {\n    switch (name) {\n      case 'pay_type':\n        return !value.length ? `${label[name]} is required.` : '';\n      case 'amount':\n        return !value.length || +value < 1 ? `${label[name]} is required.` : checkDecimal(name, value);\n    }\n  }\n\n  const handleChange = (value: string, name: string) => {\n\n    setErrors((prevErrors: any) => ({\n      ...prevErrors,\n      [name]: isInvalid(name, value),\n    }));\n\n    setPaymentDetails((prevDetails) => {\n      // if (name === \"pay_type\" && prevDetails.pay_type !== value) {\n      //   prevDetails.amount = '';\n      // }\n      return ({\n        ...prevDetails,\n        [name]: value,\n      })\n    })\n  };\n\n  const handleContinue = (e: any) => {\n    e.preventDefault();\n    let hasErrors;\n\n    if (!continueClicked) {\n      setContinueClicked(true);\n\n\n      if (checkType == '2') {\n        handleStepComplete({\n          quoteJob: '1'\n        });\n        return\n      }\n\n      hasErrors = Object.keys(paymentDetails).reduce((prevError, name) => {\n        const hasError = !!isInvalid(name, paymentDetails[name]);\n        setErrors((prevErrors) => ({\n          ...prevErrors,\n          [name]: isInvalid(name, paymentDetails[name]),\n        }));\n        return hasError || prevError;\n      }, false);\n    }\n\n    if (!hasErrors) {\n      let paymentdt = {\n        ...paymentDetails,\n        quoteJob: '0'\n      };\n      console.log({ paymentdt })\n      handleStepComplete(paymentdt);\n\n    } else {\n      setContinueClicked(false);\n    }\n  };\n\n  const checkErrors = () => {\n\n    if (checkType == '2') {\n      return false;\n    }\n    let value_1 = paymentDetails['pay_type'];\n    let value_2 = paymentDetails['amount'];\n    if (value_1 && value_2) {\n      let error_1 = isInvalid('pay_type', paymentDetails['pay_type']);\n      let error_2 = isInvalid('amount', paymentDetails['amount']);\n      if (!error_1?.length && !error_2?.length) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  const priceOptions = [\n    { value: 'Per hour', label: 'Per Hour' },\n    { value: 'Fixed price', label: 'Fixed Price' },\n  ];\n\n\n  const { pay_type, amount } = paymentDetails;\n  return (\n\n    <div className=\"app_wrapper\">\n      <div className=\"section_wrapper\">\n        <div className=\"custom_container\">\n          <div className=\"form_field\">\n            <div className=\"flex_row\">\n              <div className=\"flex_col_sm_5\">\n                <div className=\"relate\">\n                  <button className=\"back\" onClick={handleStepBack}></button>\n                  <span className=\"title\">Job type</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* {'CR Change'} */}\n          <div className=\"form_field\">\n            <div className=\"checkbox_wrap agree_check\">\n              <input\n                onChange={() => {\n                  // if (canDisable !== '1') {\n                    checkType !== '1' ? setCheckType('1') : setCheckType('0')\n                  // }\n                }}\n                checked={checkType === '1' ? true : false}\n                className=\"filter-type filled-in\"\n                type=\"checkbox\"\n                id=\"milestone1\" />\n              <label htmlFor=\"milestone1\">\n              <span className=\"ft_bold\">\n                  {'I have a budget'}\n                  </span>\n                <div className=\"sub-title\">\n                  How would you like to pay for it?\n                </div>\n              </label>\n            </div>\n          </div>\n\n          <div className=\"flex_row\" style={{ paddingLeft: '35px' }}>\n            <div className=\"flex_col_sm_5\">\n              <div className=\"flex_row\">\n                <div className=\"flex_col_sm_5\">\n                  <div className=\"form_field\">\n                    <div className=\"text_field\">\n                      <input\n                        type=\"number\"\n                        placeholder=\"Price\"\n                        name=\"Price\"\n                        className=\"detect_input_ltr\"\n                        min=\"10\"\n                        // min=\"1\"\n                        step=\".01\"\n                        required\n                        value={Number(amount) ? amount : ''}\n                        readOnly={checkType === '2' ? true : false}\n                        onChange={({ target: { value } }) => handleChange(value, 'amount')}\n                      />\n                      <span className=\"detect_icon_ltr dollar\">$</span>\n                    </div>\n                    <span className=\"error_msg mtb-15\">{errors?.amount}</span>\n                  </div>\n                </div>\n                <div className=\"flex_col_sm_5\">\n                  <div className=\"form_field\">\n                    <div className=\"text_field\">\n                      <Select\n                        className=\"select_menu\"\n                        value={reactSelect}\n                        options={priceOptions}\n                        isDisabled={checkType === '2' ? true : false}\n                        onChange={(item: any) => {\n                          setReactSelect(item);\n                          handleChange(item?.value, 'pay_type')\n                        }}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n            <div className=\"form_field\">\n              <div className=\"checkbox_wrap agree_check\">\n                <input\n                  onChange={() => {\n                    if (checkType !== '2') {\n                      setCheckType('2')\n                    } else {\n                      setCheckType('0')\n                    }\n                    setPaymentDetails({ pay_type: 'Per hour', amount: '' })\n                    setErrors({ pay_type: '', amount: '' });\n                  }}\n                  checked={checkType === '2' ? true : false}\n                  className=\"filter-type filled-in\"\n                  type=\"checkbox\"\n                  id=\"milestone2\" />\n                <label htmlFor=\"milestone2\">\n                  <span className=\"ft_bold\">\n                  {'I need a quote'}\n                  </span>\n                  <div className=\"sub-title\">\n                    Find a quote that suits your budget\n                  </div>\n                </label>\n              </div>\n            </div>\n          \n\n          <div className=\"form_field\">\n            <button\n              className={`fill_btn full_btn btn-effect ${checkErrors() ? 'disable_btn' : ''}`}\n              onClick={handleContinue}>Continue</button>\n          </div>\n        </div>\n      </div>\n\n    </div >\n  )\n}\n\nexport default Payment\n"]},"metadata":{},"sourceType":"module"}